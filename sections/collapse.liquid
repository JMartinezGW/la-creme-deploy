<div class="index-section">
  <div class="page-width">
    <div class="grid">
      {% for block in section.blocks %}
        {% if block.type == 'collapse' %}
          <div class="grid__item small--one-whole one-half">
            {% if block.settings.title %}
              <button type="button" class="collapse__title collapsible-trigger collapsible-trigger-btn" aria-controls="Collapse-{{ block.id }}">
                <p class="h2">{{ block.settings.title }}</p>
                {% include 'collapsible-icons' %}
              </button>
            {% endif %}
            <div id="Collapse-{{ block.id }}" class="collapsible-content collapsible-content--all">
              <div class="collapsible-content__inner">
                <div class="collapse__collapsible">
                  {{ block.settings.text }}
                </div>
              </div>
            </div>
          </div>
      
     	 {% assign mod = forloop.index | modulo: 2 %}
         {% if mod == 0 %}
      		<div class="clearfix"></div>
         {% endif %}
        {% endif %}
      
        {% if block.type == 'button' %}
          {% if block.settings.button_label != blank and block.settings.button_link != blank %}
          	<div class="grid__item small--one-whole text-center">
              <a class="btn" href="{{ block.settings.button_link }}">{{ block.settings.button_label }}</a>
      		</div>
          {% endif %}
        {% endif %}
      
      {% endfor %}
    </div>
  </div>
</div>
{% schema %}
  {
    "name": "Collapses",
    "class": "index-section",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Title"
      }
    ],
	"blocks": [
      {
        "type": "collapse",
        "name": "Collapse",
        "limit": 4,
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Title"
          },
          {
            "type": "richtext",
            "id": "text",
            "label": "Text"
          }
        ]
      },
      {
        "type": "button",
        "name": "Button",
        "limit": 1,
        "settings": [
		  {
        	"type": "text",
        	"id": "button_label",
        	"label": "Button label"
		  },
          {
            "type": "url",
            "id": "button_link",
            "label": "Button link"
          }
		]
      }
    ],
    "presets": [{
      "name": "Collapses",
      "category": "Advanced layout"
    }]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
