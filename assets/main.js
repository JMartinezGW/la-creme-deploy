(()=>{"use strict";const t=new class{async read(t){try{const e=await fetch(t);return await e.json()}catch(t){console.log(t.message)}}async addToCart(t){let e={items:t};try{const t=await fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),i=await t.json();return $("body").trigger("added.ajaxProduct"),i}catch(t){console.error(`Error: ${t.message}`)}}},e=()=>({$potVariantSelector:document.querySelector("#potVariantSelector"),$potPrice:document.querySelector("#potPrice"),$potInputList:document.querySelectorAll(".pot-input"),$rechargeOnlyList:document.querySelectorAll(".recharge-only.is-active"),$potVariantSelectorInput:document.querySelectorAll(".pot-variant-selector input"),$totalProductPrice:document.querySelector(".total-product-price"),$rechargeOnlyInput:document.querySelectorAll(".recharge-only-input"),$addToCartButton:document.querySelectorAll(".add-to-cart-button"),$fixedBarTotalPrice:document.querySelector("#fixedBarTotalPrice"),$fixedBarBuyButton:document.querySelector("#fixedBarBuyButton"),$accordionButtons:document.querySelectorAll(".product-details-accordion__button"),$mainSlider:document.querySelector(".js-main-slider"),$mainSliderContainer:document.querySelector("#mainSliderContainer"),$variantSlider:document.querySelector("#variantSlider"),$variantSliderNav:document.querySelector("#variantSliderNav"),$photoswipeImages:document.querySelectorAll("#variantSlider .photoswipe__image"),$productThumbItem:document.querySelectorAll("#variantSlider ~ .product__thumbs .product__thumb-item img"),$triggerPhotosipe:document.querySelectorAll("#variantSlider .js-photoswipe__zoom"),$pswpElement:document.querySelectorAll(".pswp")[0],$photoShipeCloseButton:document.querySelector("#photoShipeCloseButton"),$arrowDropDownMobile:document.querySelectorAll(".mobile-nav__toggle > button.collapsible-trigger"),$hamburgerMenu:document.querySelector("#hamburgerMenu"),$closeMenuButton:document.querySelector("#closeMenuButton"),$navDrawer:document.querySelector("#NavDrawer"),$root:document.querySelector("html"),$body:document.querySelector("body"),$buttonCompareProducts:document.querySelectorAll(".js-button-compare-products"),$overlay:document.querySelector("#overlay")}),i=t=>new window.Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t/100);function a(t,e){const i=document.createElement("div");i.innerHTML=t.render(),e.append(i.firstElementChild)}const o=(t,e)=>{t.classList.toggle(e)};class n{constructor(t={}){this.props=t}}const r=class extends n{render(){return'\n      <div id="variantSlider" class="aos-animate product__main-photos"></div>\n    '}},s=class extends n{render(){return'\n      <div\n        class="product__thumbs product__thumbs--below product__thumbs-placement--left small--hide aos-init aos-animate"\n        id="variantSliderNav"\n      ></div>\n    '}},d=class extends n{render(){const{media:t,index:e}=this.props;return`\n      <div class="product-image-main product-image-main--6066994806943">\n        <div\n          class="image-wrap"\n          style="height: 0; padding-bottom: 72.40384615384615%;"\n        >\n          <img\n            class="photoswipe__image lazyload"\n            src="${t.src}"\n            data-photoswipe-src="${t.src}"\n            data-photoswipe-width="1040"\n            data-photoswipe-height="753"\n            data-index="${e}"\n            data-src="${t.src}"\n            data-widths="[360, 540, 720, 900, 1080]"\n            data-aspectratio="1.3811420982735725"\n            data-sizes="auto"\n            alt="${t.alt}"\n            title="${t.alt}"\n            srcset="${t.src}"\n          />\n          <button\n            type="button"\n            class="btn btn--body btn--circle js-photoswipe__zoom product__photo-zoom"\n            data-index="${e}"\n          >\n            <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-search" viewBox="0 0 64 64"><path d="M47.16 28.58A18.58 18.58 0 1 1 28.58 10a18.58 18.58 0 0 1 18.58 18.58zM54 54L41.94 42"/></svg>\n            <span class="icon__fallback-text">Fermer (Esc)</span>\n          </button>\n        </div>\n      </div>\n    `}},l=class extends n{render(){const{media:t,index:e}=this.props;return`\n      <div class="product-image-main product-image-main--6066994806943">\n        <div\n          class="image-wrap hide"\n          style="height: 0; padding-bottom: 100%;"\n        >\n          <img\n            class="photoswipe__image lazyload"\n            src="${t.alt}"\n            data-photoswipe-src="${t.alt}"\n            data-photoswipe-width="1040"\n            data-photoswipe-height="753"\n            data-index="${e}"\n            data-src="${t.alt}"\n            data-widths="[360, 540, 720, 900, 1080]"\n            data-aspectratio="1.3811420982735725"\n            data-sizes="auto"\n            srcset="${t.alt}"\n          />\n        </div>\n        <div\n          class="product__video-wrapper"\n          style="padding-bottom: 100%;"\n        >\n          <video\n            playsinline\n            controls\n            controlsList="nodownload"\n            preload="auto"\n            data-index="${e}"\n            poster="${t.alt}"\n            class="product__video"\n          >\n            <source src="${t.src}" />\n          </video>\n        </div>\n      </div>\n    `}},c=class extends n{render(){const{media:t,index:e}=this.props;return`\n      <div\n        class="product__thumb-item"\n        data-index="${e}"\n      >\n        <div\n          class="image-wrap"\n          style="height: 0;padding-bottom: 72.40384615384615%;"\n        >\n          <img\n            class="animation-delay-${e} lazyload"\n            data-src="${t.src}"\n            data-sizes="auto"\n            alt="${t.alt}"\n            title="${t.alt}"\n          />\n        </div>\n      </div>\n    `}},p=class extends n{render(){const{media:t,index:e}=this.props;return`\n      <div\n        class="product__thumb-item"\n        data-index="${e}"\n      >\n        <div\n          class="image-wrap"\n          style="height: 0;padding-bottom: 72.40384615384615%;"\n        >\n          <img\n            class="animation-delay-${e} lazyload"\n            data-src="${t.alt}"\n            data-sizes="auto"\n          />\n        </div>\n      </div>\n    `}};class u{constructor({mainProduct:t,pot:e,variantMediaResources:i}){this.mainProduct=t,this.mainProductTags=this.mainProduct.tags,this.totalPrice=t.price,this.potProduct=e,this.selectedPot={},this.rechargeOnly=!0,this.variantSliderCreated=!1,this.variantMediaResources=i}init(){e().$potPrice.innerText=`+ ${i(this.potProduct.price)}`}addClickEvents(t,e){t.forEach((t=>t.addEventListener("click",e)))}updateTotalPrice(){!0===this.rechargeOnly?this.totalPrice=this.mainProduct.price:this.totalPrice=this.mainProduct.price+this.potProduct.price,e().$totalProductPrice.innerText=i(this.totalPrice),e().$fixedBarTotalPrice.innerText=i(this.totalPrice)}findPotMediaResources(t){return this.variantMediaResources.get(t)}initPhotoswipeGallery=(t,i)=>{const a={allowPanToNext:!1,captionEl:!1,closeOnScroll:!1,counterEl:!1,history:!1,index:(t.target.dataset.index||t.target.parentElement.dataset.index)-1,pinchToClose:!1,preloaderEl:!1,scaleMode:"fit",shareEl:!1,tapToToggleControls:!1,getThumbBoundsFn:function(t){let e=window.pageYOffset||document.documentElement.scrollTop,a=i[t].el.getBoundingClientRect();return{x:a.left,y:a.top+e,w:a.width}}};this.gallery=new PhotoSwipe(e().$pswpElement,PhotoSwipeUI_Default,i,a),this.gallery.init()};buildPhotoswipeSliders(){const t=[...e().$photoswipeImages];let i=[];return t.forEach((t=>{let e={src:t.dataset.photoswipeSrc,w:t.dataset.photoswipeWidth,h:t.dataset.photoswipeHeight,el:t,initialZoomLevel:.5};i.push(e)})),i}buildNewSlideForPhotoSwipe(t){return{src:t.dataset.photoswipeSrc,w:t.dataset.photoswipeWidth,h:t.dataset.photoswipeHeight,el:t,initialZoomLevel:.5}}changeSliderImages(t,e){t.classList.contains("photoswipe__image")?(t.src=e.src,t.dataset.photoswipeSrc=e.src,t.srcset=e.src,t.dataset.src=e.src,t.alt=e.alt,t.title=e.alt):(t.src=e.src,t.dataset.src=e.src,t.alt=e.alt,t.title=e.alt)}updateSlider(){if(!0===this.rechargeOnly&&(e().$mainSlider.style.display="none"),!1===this.variantSliderCreated)a(new r,e().$mainSliderContainer),a(new s,e().$mainSliderContainer),this.selectedPot.media.forEach(((t,e)=>{t.src.includes(".mp4")?(a(new l({media:t,index:++e}),window.variantSlider),a(new p({media:t,index:e}),window.variantSliderNav)):(a(new d({media:t,index:++e}),window.variantSlider),a(new c({media:t,index:e}),window.variantSliderNav))})),$("#variantSlider").slick({slidesToShow:1,slidesToScroll:1,dots:!1,infinite:!1,adaptiveHeight:!0,fade:!0,asNavFor:"#variantSliderNav",responsive:[{breakpoint:769,settings:{infinite:!1,fade:!1,centerMode:!0,centerPadding:"0px"}}]}),$("#variantSliderNav").slick({slidesToShow:6,slidesToScroll:1,asNavFor:"#variantSlider",dots:!1,focusOnSelect:!0,initialSlide:2,infinite:!1,customSlideAdvancement:!0}),this.photoswipeSlides=this.buildPhotoswipeSliders(),this.addClickEvents([...e().$triggerPhotosipe],(t=>{this.initPhotoswipeGallery(t,this.photoswipeSlides)})),this.variantSliderCreated=!0;else{e().$variantSlider.style.display="block",e().$variantSliderNav.style.display="block",this.changeSliderImages(e().$photoswipeImages[2],this.selectedPot.media[2]),this.changeSliderImages(e().$photoswipeImages[3],this.selectedPot.media[3]),this.changeSliderImages(e().$productThumbItem[2],this.selectedPot.media[2]),this.changeSliderImages(e().$productThumbItem[3],this.selectedPot.media[3]);const t=this.buildNewSlideForPhotoSwipe(e().$photoswipeImages[2]),i=this.buildNewSlideForPhotoSwipe(e().$photoswipeImages[3]);this.gallery?this.gallery.items.splice(2,2,t,i):this.photoswipeSlides.splice(2,2,t,i)}$("#variantSliderNav").slick("slickGoTo",2)}removePot=t=>{t.preventDefault(),e().$rechargeOnlyInput.checked=!0,e().$potVariantSelectorInput.forEach((t=>t.classList.remove("is-active"))),e().$rechargeOnlyInput[0].classList.add("is-active"),this.selectedPot={},this.rechargeOnly=!0,this.updateTotalPrice(),e().$mainSlider.style.display="block",e().$variantSlider.style.display="none",e().$variantSliderNav.style.display="none"};selectPot=t=>{const i=t.target,a=i.dataset.potId,o=this.findPotMediaResources(a);e().$potVariantSelectorInput.forEach((t=>t.classList.remove("is-active"))),i.classList.add("is-active"),this.selectedPot={id:a,media:o},this.updateSlider(),this.rechargeOnly=!1,this.totalPrice===this.mainProduct.price&&this.updateTotalPrice()};toggleAccordion=t=>{t.target.parentElement.classList.toggle("is-open")};showAndHideModal(t){t.target.classList.contains("js-button-compare-products")&&(t.stopPropagation(),o(e().$overlay,"is-active"),o(e().$body,"modal-open"))}addToCart=async e=>{const i=e.target;i.classList.add("btn--loading");let a=[];!1===this.rechargeOnly&&a.push({quantity:1,id:this.selectedPot.id}),a.push({quantity:1,id:this.mainProduct.variants[0].id}),await t.addToCart(a),i.classList.remove("btn--loading")}}document.addEventListener("DOMContentLoaded",(function(){var t;(t=new u({mainProduct:mainProduct.getProduct(),pot:potData.getPot(),variantMediaResources})).init(),t.addClickEvents([...e().$potInputList],t.selectPot),t.addClickEvents([...e().$rechargeOnlyList],t.removePot),t.addClickEvents([...e().$rechargeOnlyInput],t.removePot),t.addClickEvents([...e().$addToCartButton],t.addToCart),t.addClickEvents([...e().$accordionButtons],t.toggleAccordion),e().$fixedBarBuyButton.addEventListener("click",t.addToCart),t.addClickEvents([...e().$buttonCompareProducts],t.showAndHideModal)}))})();